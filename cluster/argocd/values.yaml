global:
  domain: argocd.bukla.hu
server:
  pdb:
    enabled: true
  replicas: 1
  ingress:
    ingressClassName: nginx
    https: true
    enabled: true
    annotations:
      nginx.ingress.kubernetes.io/backend-protocol: "HTTPS"
    hostname: argocd.bukla.hu
    extraTls:
      - hosts:
        - argocd.bukla.hu
        secretName: wildcard-bukla-tls
  # tolerations:
  #  - key: "HAsrv"
  #    operator: "Equal"
  #    value: "true"
  #    effect: "NoExecute"

configs:
  rbac:
    policy.csv: | 
      g, authentik Admins, role:admin
  cm:
    create: true
    # dex.config: |
    #   connectors:
    #   - config:
    #       issuer: https://authentik.bukla.hu/application/o/argocd/
    #       clientID: oU1vXwPUBb2lxv9QvLTaLIc3na2lpkgVbsAaPdky
    #       clientSecret: $dex.authentik.clientSecret
    #       insecureEnableGroups: true
    #       scopes:
    #         - openid
    #         - profile
    #         - email
    #     name: authentik
    #     type: oidc
    #     id: authentik
    oidc.config: |
      name: Authentik
      issuer: https://authentik.bukla.hu/application/o/argocd/
      clientID: oU1vXwPUBb2lxv9QvLTaLIc3na2lpkgVbsAaPdky
      clientSecret: $dex.authentik.clientSecret
      rootCA: |
        -----BEGIN CERTIFICATE-----
        MIIFrzCCA5egAwIBAgIUSWBFEOwxSerL7kEZ1129Hq7hFtswDQYJKoZIhvcNAQEL
        BQAwZzELMAkGA1UEBhMCSFUxEDAOBgNVBAgMB0h1bmdhcnkxETAPBgNVBAcMCEJ1
        ZGFwZXN0MQ4wDAYDVQQKDAVCdWtsYTEQMA4GA1UECwwHSG9tZWxhYjERMA8GA1UE
        AwwIQnVrbGEuaHUwHhcNMjQwMzIwMjAwMzU0WhcNMzQwMzE4MjAwMzU0WjBnMQsw
        CQYDVQQGEwJIVTEQMA4GA1UECAwHSHVuZ2FyeTERMA8GA1UEBwwIQnVkYXBlc3Qx
        DjAMBgNVBAoMBUJ1a2xhMRAwDgYDVQQLDAdIb21lbGFiMREwDwYDVQQDDAhCdWts
        YS5odTCCAiIwDQYJKoZIhvcNAQEBBQADggIPADCCAgoCggIBAOUlOhaps6LibP14
        hNWjMnnGg9jbblQL7eOp13nEkVgo/9JtxDoj3byUH0tTjxtRfKk4ygwjJ16dNTgC
        e1d4HcaOGfNhqT4d7yuUqVtfqCDNmaVDwLWcAAsLJcWBmcV0SC3Nkt1IeZ/v4+xQ
        FzRZgIMwkNebl/hiBmYHvbrSZnWxiMDuUWltVkMvED5IckCVM4BAhS1PsTHmzskY
        eu6wZ+8ioXQlgtC8EIuYXX71f2mxh+oTmMZZi8n5yTBlTj5bMEwOL3rW0E85yT6f
        hPbq7md04jAWLKpwOn6Z2ZOAMzRW4npBuB3PM16NflmH0yW7GKnr9w8GBTzHNKs6
        1FZq3Y4yFwjFCEdgZpSHm7cS+S6PFQO51SgsuzcEGhpZ0FTnDwu/9iAujnwOZou7
        WvdDKnrYQehA/127bCd2Y38uSM0oQqyX6KlGiz/rIGJtpG/DVE4qmcq0Krq/WDWt
        x2WClJ+8PVVtU23ydJv6rpNfLFu3QgnQK2H2B0IKd9FDszKe1QC+vYavHuaT8WDg
        qN653MqStGNyhhuFvndRFkvkb2b/yEUUKxBmIClLnepWvoblamTyXTR7M/aayXPs
        rkSn1x+He3N/luqexNe5QrMrXy+PT1eqd87gUVn967ADrrwiAo3xomqlMLgiDr7Q
        kj6PFq1FAVg5e7Fs/7wtsfJVM7i7AgMBAAGjUzBRMB0GA1UdDgQWBBS7DZz7M2Pd
        s9KFMIA5zqh2DcJ4czAfBgNVHSMEGDAWgBS7DZz7M2Pds9KFMIA5zqh2DcJ4czAP
        BgNVHRMBAf8EBTADAQH/MA0GCSqGSIb3DQEBCwUAA4ICAQBo7WlKBZfb6ypVAy/L
        qhuuFCvW3B9Qd2KsGDZYidwAqy51VKPcAXlKcR/nCx0YGbsN417++DmA8TdGiJPU
        1XcEwDDdGTZkmDCQFlooZ3popU4WOzssHUHKNcltmFUUuY6iVc8sg6DAaNLxYBW6
        tLCrF3+Tc38SY7Ek5ckqDCCpUv02aS1DaSj6cZpHBeWH6Uac3cXN5cnxdV2LF6sN
        cSZ+TF7iJnFr4qF82QhwdGJ3zWhsx7qsLvn7Bi6+K/emwsShyD1Qo5Q4sb4j5AnZ
        qBlYkS/dcceqDPKZIeeE0uuMRzbOVqjHe81Jn1rni3pr7gt5YzyHIs2Br+WfEhyI
        olMHg6Jn4b9eLjAg1dxe4D/XIV9FlAIveBbk6fvOTosUfmt+S49o9UQeaViwzgjX
        ecssBTQgMOlelUC9qLZQ0DQg7IjZLYO/yZ0dzHkhdyJHgrgLnYAT7zs/jCNJzWZH
        Z2OR/Pa+Ko8iUy00TTmB6ZIT0XLpQnrt6RjPmqD1XAzMA26B9y7X9afadw5NHtcY
        N1n2JtmtEnKqclSEHu0v9dmYK5cLC/2G6EUbxrHYOMfP+KrRmb93bkYAh9zuzzVO
        OrvU1mrgE35K+LKAyuE24wbyniKdI96gmfDjh06JgVVIi/9mpw3I0ptPBFd+GK7E
        rPihirbwrIJ26C+Pl7+Xv7nmVQ==
        -----END CERTIFICATE-----
      requestedIDTokenClaims:
        groups:
          essential: true
      requestedScopes:
        - openid
        - profile
        - email
# dex:
#   metrics:
#     enabled: true
#     serviceMonitor:
#       enabled: true
#   volumeMounts:
#   - mountPath: /etc/ssl/certs # -- REWWORK THIS!!!
#     name: etc-ssl-certs
#     readOnly: true

#   volumes:
#    - name: etc-ssl-certs
#      hostPath:
#        path: /etc/ssl/certs
#        type: DirectoryOrCreate

# url: http://argocd.company
# dex.config: |
#     connectors:
#     - config:
#         issuer: http://authentik.company/application/o/<application slug defined in step 2>/
#         clientID: <client ID from the Provider above>
#         clientSecret: $dex.authentik.clientSecret
#         insecureEnableGroups: true
#         scopes:
#           - openid
#           - profile
#           - email
#       name: authentik
#       type: oidc
#       id: authentik
