container_runtime: containerd

lapi:
  persistentVolume:
  #   # -- Persistent volume for data folder. Stores e.g. registered bouncer api keys
    data:
      enabled: true
      accessModes:
        - ReadWriteOnce
      storageClassName: "nfs-subdir"
  #     existingClaim: ""
      size: 1Gi
  #   # -- Persistent volume for config folder. Stores e.g. online api credentials
    config:
      enabled: true
      accessModes:
        - ReadWriteOnce
      storageClassName: "nfs-subdir"
  #     existingClaim: ""
      size: 100Mi
  #   # -- UI for crowdsec
  dashboard:
    enabled: true
    ingress:
      enabled: true
      ingressClassName: "nginx-internal"
      host: "crowdsec.bukla.hu"
      tls: 
        - secretName: wildcard-bukla-tls

agent:
  acquisition:
    - namespace: "ingress-nginx-external"
      podName: "ingress-nginx-external-controller-*"
      program: "nginx"
  env:
    - name: COLLECTIONS
      value: "crowdsecurity/nginx"
  # additionalAcquisition:
  #   - source: loki
  #     log_level: info
  #     # url: http://loki.logging.svc.cluster.local:3100/  
  #     url: https://loki-gateway.bukla.hu
  #     limit: 1000
  #     query: |
  #       {container="haproxy"}
  #     labels:
  #       type: haproxy